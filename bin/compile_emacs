#!/bin/sh

set -x
set -e

# TODO generalize script

./autogen.sh
./autogen.sh git

# ./configure \
#     CFLAGS="-ggdb3 -O0" \
#     CXXFLAGS="-ggdb3 -O0" \
#     LDFLAGS="-ggdb3" \
#     --enable-checking \
#     --enable-asserts \
#     --with-xpm=yes \
#     --with-jpeg=no \
#     --with-gif=no \
#     --with-tiff=no \
#     --with-x-toolkit=gtk3

# ./configure \
#     CFLAGS="-flto -O3" \
#     CXXFLAGS="-flto -O3" \
#     LDFLAGS="-flto" \
#     --enable-checking \
#     --enable-asserts \
#     --with-xpm=yes \
#     --with-jpeg=no \
#     --with-gif=no \
#     --with-tiff=no \
#     --with-x-toolkit=gtk3

# ./configure \
#     CFLAGS="-O3" \
#     CXXFLAGS="-O3" \
#     --enable-checking \
#     --with-xpm=yes \
#     --with-jpeg=no \
#     --with-gif=no \
#     --with-tiff=no \
#     --with-x-toolkit=gtk3 \
#     --with-xwidgets

# ./configure \
#     --with-xpm=yes \
#     --with-jpeg=no \
#     --with-gif=no \
#     --with-tiff=no \
#     --with-x-toolkit=gtk3 \
#     --enable-link-time-optimization


./configure \
    --prefix=/opt/emacs \
    --with-x-toolkit=gtk3 \
    --with-xpm \
    --without-jpeg \
    --without-gif \
    --without-tiff
#    --with-xml2 \
#    --with-cairo \
#    --with-xwidgets

make bootstrap
make
make install

# rm src/emacs-2*
